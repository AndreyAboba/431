print(' {ðŸ§ } EntityX lib by stuppp110')
-- EntityX: Lightweight NPC Entity Finder Library

local EntityX = {}

-- Predefined entity groups with NPC names
EntityX.EntityGroups = {
    QuestAI = {
        Missions = {
            Names = {"Poacher", "Poacher Mage", "Poacher Gunner", "Poacher Rifleman", "Imperial", "Imperial Mage", "Nightfall Spitter Spider", "Nightfall Blink Spider"},
            Path = workspace:FindFirstChild("Missions")
        },
        SpiderCave = {
            Names = {"Spider", "Cave Spider"},
            Path = workspace.MapProps:FindFirstChild("SpiderCave")
        }
    }
}

-- Recursive function to find entities
local function findEntities(parent, names)
    local entities = {}
    for _, child in pairs(parent:GetChildren()) do
        if table.find(names, child.Name) then
            table.insert(entities, child)
        end
        for _, nested in pairs(child:GetChildren()) do
            local nestedEntities = findEntities(nested, names)
            for _, entity in pairs(nestedEntities) do
                table.insert(entities, entity)
            end
        end
    end
    return entities
end

-- Generic function to get closest entity from a given path
function EntityX:GetClosestEntity(mousePos, entityGroup)
    local Camera = workspace.CurrentCamera
    local closestEntity, minDistance = nil, math.huge

    local groupData = EntityX.EntityGroups[entityGroup]
    if not groupData then return nil end

    for _, pathData in pairs(groupData) do
        if pathData.Path and pathData.Names then
            local entities = findEntities(pathData.Path, pathData.Names)
            for _, entity in pairs(entities) do
                local distance = (Camera.CFrame.Position - entity.Position).Magnitude
                local screenPos = Camera:WorldToViewportPoint(entity.Position)
                local mouseDistance = (Vector2.new(screenPos.X, screenPos.Y) - mousePos).Magnitude
                if mouseDistance < minDistance then
                    minDistance = mouseDistance
                    closestEntity = entity
                end
            end
        end
    end

    return closestEntity
end
print(' {ðŸ§ } EntityX version: 1.1')
return EntityX



